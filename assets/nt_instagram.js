(function($){"use strict";geckoShopify.refresh_ins=function(_this){var datalm=null,data=null,id="",getBy=_this.data("getby"),dtid=_this.data("id"),limit=_this.data("limit"),deafult_txt="spnt_t4",acc=_this.data("acc")||deafult_txt;if(acc!=deafult_txt){if(sp_nt_storage&&(datalm=sessionStorage.getItem("nt_ins"+acc+dtid),data=sessionStorage.getItem("nt_ins"+acc)),datalm!=null&&data!="")return _this.html(datalm).parent().addClass("ins_loaded"),_this.hasClass("js_carousel")?(geckoShopify.refresh_flickity(_this),!1):void 0;if(data!=null&&data!="")data=JSON.parse(data),ins_js(_this,data,!1,acc,limit,dtid);else{if(acc=="ins_19041994")var ajaxUrl2=nt_settings.ins_host+"/instagram/media?shop="+Shopify.shop+"&resource=default";else var ajaxUrl2="https://graph.instagram.com/me/media?fields=comments_count,like_count,id,media_type,media_url,permalink,thumbnail_url,caption,children&access_token="+acc;$.ajax({url:ajaxUrl2,type:"GET",dataType:"json",success:function(res){var data2=acc=="ins_19041994"?res:res.data;ins_js(_this,data2,!0,acc,limit,dtid)},error:function(e){console.error("Instagram Feed:error time1"),fetch("https://graph.instagram.com/refresh_access_token?grant_type=ig_refresh_token&access_token="+acc).then(function(response){if(!response.ok)throw new Error("not ok");return response.json()}).then(function(media){if(result.stat==="fail")throw new Error(result.message);ins_fetch(url,_this,acc,limit,dtid)}).catch(function(err){console.error("Instagram Feed:error refresh_token"),ins_fetch(url,_this,acc,limit,dtid)})}})}}};function ins_fetch(url2,_this,acc,limit,dtid){fetch(ajaxUrl).then(function(response){if(!response.ok)throw new Error("not ok");return response.json()}).then(function(media){if(result.stat==="fail")throw new Error(result.message);var media_txt=media.message||"no_txt";if(media_txt!="no_txt")return _this.html('<div class="tc cr tu fwm col-12">'+media_txt+"</div>").parent().addClass("ins_loaded"),!1;var data=acc=="ins_19041994"?media:media.data;ins_js(_this,data,!0,acc,limit,dtid)}).catch(function(err){console.error("Instagram Feed:error fetch")})}function ins_js(_this,data,bl,acc,limit,dtid){var html="",bl=bl||!0,cl=_this.data("cl"),cltb=_this.data("cltb"),clmb=_this.data("clmb"),target=_this.data("target");$.each(data,function(index,el){if(index>=limit)return 0;var img_url=el.thumbnail_url||el.media_url;html+='<div class="cl_nt_'+index+" col_ins col-"+clmb+" col-md-"+cltb+" col-lg-"+cl+" item pr ins_media_type_"+el.media_type+'"><a data-no-instant rel="nofollow" class="db pr oh" href="'+el.permalink+'" target="'+target+'"><div class="lazyloadt4s nt_bg_lz pr_lazy_img" data-bg="'+img_url+'" data-sizes="auto"></div><div class="info pa tc flex ts__03 fl_center al_center op__0 t__0 l__0 r__0 b__0 h__100 pe_none"><span class="pr cw"><i class="las la-video"></i><i class="las la-image"></i></span></div></a></div>'}),_this.html(html).parent().addClass("ins_loaded"),_this.hasClass("js_carousel")&&geckoShopify.refresh_flickity(_this),sp_nt_storage&&bl&&(sessionStorage.setItem("nt_ins"+acc+dtid,html),sessionStorage.setItem("nt_ins"+acc,JSON.stringify(data)))}geckoShopify.instagram=function(){$(".js_nt_ist").length!=0&&$(".js_nt_ist").each(function(index){geckoShopify.refresh_ins($(this))})}})(jQuery_T4NT),jQuery_T4NT(document).ready(function($){geckoShopify.instagram(),$(".js_sidebar").on("lazyincluded",function(e){geckoShopify.instagram(),$("body").trigger("refresh_currency")})});
//# sourceMappingURL=/s/files/1/0637/4765/3864/t/15/assets/nt_instagram.js.map?v=1654163243
