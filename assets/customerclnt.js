(function($){"use strict";var body=$("body"),$RecoverHeading=$("#RecoverHeading"),$RecoverEmail=$("#RecoverEmail"),$LoginHeading=$("#LoginHeading"),$wrapperId=$("#response_calcship"),$ld=$("#ld_cl_bar"),nt_js_cart=$(".nt_js_cart");geckoShopify.initEventListeners=function(){$("#RecoverPassword").on("click",function(evt){evt.preventDefault(),showRecoverPasswordForm(),$RecoverHeading.attr("tabindex","-1").focus()}.bind(this)),$("#HideRecoverPasswordLink").on("click",function(evt){evt.preventDefault(),hideRecoverPasswordForm(),$LoginHeading.attr("tabindex","-1").focus()}.bind(this)),$RecoverHeading.on("blur",function(){$(this).removeAttr("tabindex")}),$LoginHeading.on("blur",function(){$(this).removeAttr("tabindex")})};function showRecoverPasswordForm(){$("#RecoverPasswordForm").removeClass("hide"),$("#CustomerLoginForm").addClass("hide"),$RecoverEmail.attr("aria-invalid")==="true"&&$RecoverEmail.focus()}function hideRecoverPasswordForm(){$("#RecoverPasswordForm").addClass("hide"),$("#CustomerLoginForm").removeClass("hide")}geckoShopify.resetPasswordSuccess=function(){var $formState=$(".reset-password-success");$formState.length&&$("#ResetSuccess").removeClass("hide").focus()},geckoShopify.customerAddressForm=function(){var $newAddressForm=$("#AddressNewForm"),$newAddressFormButton=$("#AddressNewButton");$newAddressForm.length&&(Shopify&&new Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),$(".address-country-option").each(function(){var formId=$(this).data("form-id"),countrySelector="AddressCountry_"+formId,provinceSelector="AddressProvince_"+formId,containerSelector="AddressProvinceContainer_"+formId;new Shopify.CountryProvinceSelector(countrySelector,provinceSelector,{hideElement:containerSelector})}),$(".address-new-toggle").on("click",function(){var isExpanded=$newAddressFormButton.attr("aria-expanded")==="true";$newAddressForm.toggleClass("hide"),$newAddressFormButton.attr("aria-expanded",!isExpanded).focus()}),$(".address-edit-toggle").on("click",function(){var formId=$(this).data("form-id"),$editButton=$("#EditFormButton_"+formId),$editAddress=$("#EditAddress_"+formId),isExpanded=$editButton.attr("aria-expanded")==="true";$editAddress.toggleClass("hide"),$editButton.attr("aria-expanded",!isExpanded).focus()}),$(".address-delete").on("click",function(){var $el=$(this),target=$el.data("target"),confirmMessage=$el.data("confirm-message");confirm(confirmMessage||"Are you sure you wish to delete this address?")&&Shopify.postLink(target,{parameters:{_method:"delete"}})}))},geckoShopify.checkUrlHash=function(){var hash=window.location.hash;hash==="#recover"&&showRecoverPasswordForm.bind(this)()},geckoShopify.estimatedShippingRates=function(){var _zip=$("#address_zip_ship"),_country=$("#address_country_ship"),_province=$("#address_province_ship");body.on("click",".get_rates",function(evt){var _this=$(this);$ld.trigger("ld_bar_star"),_this.addClass("pe_none");var shippingAddress={};shippingAddress.zip=_zip.val()||"",shippingAddress.country=_country.val()||"",shippingAddress.province=_province.val()||"";var params={type:"POST",url:"/cart/shipping_rates.json",data:$.param({shipping_address:shippingAddress}),success:function(response){$wrapperId.empty().hide(),geckoShopify.onCartShippingRatesUpdate(response.shipping_rates,shippingAddress),sp_nt_storage&&localStorage.setItem("shippingAddress",JSON.stringify(shippingAddress))},error:function(XMLHttpRequest2,textStatus2){$wrapperId.empty().hide(),_onError(XMLHttpRequest2,textStatus2)},complete:function(){$ld.trigger("ld_bar_end"),_this.removeClass("pe_none")}};$.ajax(params)});var _fullMessagesFromErrors=function(errors){var fullMessages=[];return $.each(errors,function(attribute,messages){$.each(messages,function(index,message){fullMessages.push(attribute+" "+message)})}),fullMessages},_onError=function(XMLHttpRequest,textStatus){var feedback="",data=eval("("+XMLHttpRequest.responseText+")");data.message?feedback=data.message+"("+data.status+"): "+data.description:feedback="Error : "+_fullMessagesFromErrors(data).join("; "),feedback==="Error : country is not supported."&&(feedback=nt_settings.no_rates),$wrapperId.html('<div class="shippingcalc_mess">'+feedback+"</div>").fadeIn()}},geckoShopify.onCartShippingRatesUpdate=function(rates,shipping_address){var readable_address="";if(shipping_address.zip&&(readable_address+=shipping_address.zip+", "),shipping_address.province&&(readable_address+=shipping_address.province+", "),readable_address+=shipping_address.country,rates.length>1)var firstRate=geckoShopify.formatMoney(rates[0].price),message=nt_settings.multiple_rates.replace("[number_of_rates]",rates.length).replace("[address]",readable_address).replace("[rate]",firstRate);else if(rates.length===1)var message=nt_settings.one_rate.replace("[address]",readable_address);else var message=nt_settings.no_rates;var ratesList="";$.each(rates,function(i,rate){var price=geckoShopify.formatMoney(rate.price),rateValue=nt_settings.rate_value.replace("[rate_title]",rate.name).replace("[rate]",price);ratesList+="<li>"+rateValue+"</li>"}),$wrapperId.html('<div class="shippingcalc_mess">'+message+'</div><div class="shippingcalc_rate"><ul>'+ratesList.toString().replace(/<\/li>,<li>/g,"</li><li>")+"</ul></div>").fadeIn(),body.trigger("refresh_currency")},geckoShopify.AddressShip=function(){Shopify&&new Shopify.CountryProvinceSelector("address_country_ship","address_province_ship",{hideElement:"address_province_container_ship"})},geckoShopify.cart_tls_ship=function(){var Timeout,Cartdiscode=$("#Cartdiscode"),localCartdiscode=localStorage.getItem("Cartdiscode");$("#couponcode").val(localCartdiscode),$(".js_cart_tls").click(function(e){e.preventDefault();var id=$(this).data("id");nt_js_cart.addClass("ld_nt_cl ld_cart_tls"),$(".mini_cart_"+id).addClass("is_nt_op"),id=="note"?Timeout=setTimeout(function(){$("#CartSpecialInstructions").focus()},500):id=="dis"&&(Timeout=setTimeout(function(){$("#Cartdiscode").focus()},500))}),sp_nt_storage&&Cartdiscode.length>0&&($(".js_cart_save").click(function(e){localStorage.setItem("Cartdiscode",Cartdiscode.val())}),Cartdiscode.val(localCartdiscode)),$(".js_cart_tls_back").click(function(e){e.preventDefault(),clearTimeout(Timeout),nt_js_cart.removeClass("ld_nt_cl ld_cart_tls"),$(".is_nt_op").removeClass("is_nt_op")})}})(jQuery_T4NT),jQuery_T4NT(document).ready(function($2){$2("#address_country_ship").addClass("lazyloadt4s").on("lazyincluded",function(e){var res_address=null,_zip2=$2("#address_zip_ship"),_country2=$2("#address_country_ship"),_province2=$2("#address_province_ship");sp_nt_storage&&(res_address=JSON.parse(localStorage.getItem("shippingAddress"))),res_address!=null&&(_country2.attr("data-default",res_address.country),_province2.attr("data-default",res_address.province),_zip2.val(res_address.zip),_country2.addClass("has_address")),geckoShopify.AddressShip(),geckoShopify.estimatedShippingRates(),$2(".shipping_calc_page").removeClass("loading")}),geckoShopify.initEventListeners(),geckoShopify.checkUrlHash(),geckoShopify.resetPasswordSuccess(),geckoShopify.customerAddressForm(),geckoShopify.cart_tls_ship()});
//# sourceMappingURL=/s/files/1/0637/4765/3864/t/15/assets/customerclnt.js.map?v=1654163211
